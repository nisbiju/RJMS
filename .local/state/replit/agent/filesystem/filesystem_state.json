{"file_contents":{"frontend/postcss.config.js":{"content":"export default {\n  plugins: {},\n};\n","size_bytes":35},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"backend/app/utils/auth_utils.py":{"content":"from functools import wraps\nfrom flask import session, jsonify\nfrom ..models.models import User\n\ndef login_required(f):\n    @wraps(f)\n    def decorated_function(*args, **kwargs):\n        if 'user_id' not in session:\n            return jsonify({'error': 'Authentication required'}), 401\n        return f(*args, **kwargs)\n    return decorated_function\n\ndef teacher_required(f):\n    @wraps(f)\n    def decorated_function(*args, **kwargs):\n        if 'user_id' not in session:\n            return jsonify({'error': 'Authentication required'}), 401\n        \n        user = User.query.get(session['user_id'])\n        if not user or user.role != 'teacher':\n            return jsonify({'error': 'Teacher access required'}), 403\n        \n        return f(*args, **kwargs)\n    return decorated_function\n\ndef student_required(f):\n    @wraps(f)\n    def decorated_function(*args, **kwargs):\n        if 'user_id' not in session:\n            return jsonify({'error': 'Authentication required'}), 401\n        \n        user = User.query.get(session['user_id'])\n        if not user or user.role != 'student':\n            return jsonify({'error': 'Student access required'}), 403\n        \n        return f(*args, **kwargs)\n    return decorated_function\n","size_bytes":1232},"src/assets/main.css":{"content":"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --bg: #FFF7ED;\n  --container: #FBEAD3;\n  --popup: #F9DDBB;\n  --filter: #C4B49E;\n  --text-dark: #333333;\n  --text-light: #666666;\n  --border: #E5D4B8;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n  background-color: var(--bg);\n  color: var(--text-dark);\n  line-height: 1.6;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n.btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.btn-primary {\n  background-color: var(--popup);\n  color: var(--text-dark);\n}\n\n.btn-primary:hover {\n  background-color: var(--filter);\n}\n\n.btn-secondary {\n  background-color: var(--container);\n  color: var(--text-dark);\n}\n\n.card {\n  background-color: var(--container);\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n}\n\n.card:hover {\n  box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n  transform: translateY(-2px);\n  transition: all 0.2s;\n}\n\ninput, textarea, select {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid var(--border);\n  border-radius: 6px;\n  font-size: 14px;\n  background-color: white;\n}\n\ninput:focus, textarea:focus, select:focus {\n  outline: none;\n  border-color: var(--filter);\n}\n\n.navbar {\n  background-color: var(--container);\n  padding: 15px 0;\n  border-bottom: 1px solid var(--border);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n\n.navbar-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.navbar-title {\n  font-size: 24px;\n  font-weight: bold;\n  cursor: pointer;\n  color: var(--text-dark);\n  text-decoration: none;\n}\n\n.navbar-menu {\n  display: flex;\n  gap: 20px;\n  align-items: center;\n}\n\n.navbar-menu a, .navbar-menu button {\n  text-decoration: none;\n  color: var(--text-dark);\n  font-weight: 500;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px 12px;\n  border-radius: 6px;\n  transition: background-color 0.2s;\n}\n\n.navbar-menu a:hover, .navbar-menu button:hover {\n  background-color: var(--popup);\n}\n\n.dropdown {\n  position: relative;\n}\n\n.dropdown-menu {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  background-color: var(--popup);\n  border-radius: 6px;\n  box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n  min-width: 150px;\n  margin-top: 5px;\n  z-index: 1000;\n}\n\n.dropdown-menu a, .dropdown-menu button {\n  display: block;\n  padding: 10px 15px;\n  text-decoration: none;\n  color: var(--text-dark);\n  background: none;\n  border: none;\n  width: 100%;\n  text-align: left;\n  cursor: pointer;\n}\n\n.dropdown-menu a:hover, .dropdown-menu button:hover {\n  background-color: var(--filter);\n}\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20px;\n}\n\n@media (max-width: 768px) {\n  .grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n.search-bar {\n  margin: 20px 0;\n}\n\n.filter-panel {\n  background-color: var(--filter);\n  padding: 15px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n\n.section {\n  padding: 60px 0;\n}\n\n.section h2 {\n  font-size: 32px;\n  margin-bottom: 20px;\n}\n\n.section p, .section ul {\n  font-size: 16px;\n  line-height: 1.8;\n  color: var(--text-light);\n}\n\n.section ul {\n  margin-left: 20px;\n}\n\n.section ul li {\n  margin-bottom: 10px;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: 500;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  background-color: white;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\ntable th, table td {\n  padding: 12px;\n  text-align: left;\n  border-bottom: 1px solid var(--border);\n}\n\ntable th {\n  background-color: var(--container);\n  font-weight: 600;\n}\n\ntable tr:hover {\n  background-color: var(--bg);\n}\n\n.badge {\n  display: inline-block;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  background-color: var(--filter);\n  color: var(--text-dark);\n}\n\n.checkbox-group {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.checkbox-group label {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  cursor: pointer;\n}\n","size_bytes":4133},"src/main.js":{"content":"import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport './assets/main.css'\n\nconst app = createApp(App)\napp.use(router)\napp.mount('#app')\n","size_bytes":179},"frontend/src/assets/main.css":{"content":"* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --bg: #FFF7ED;\n  --container: #FBEAD3;\n  --popup: #F9DDBB;\n  --filter: #C4B49E;\n  --text-dark: #333333;\n  --text-light: #666666;\n  --border: #E5D4B8;\n}\n\nbody {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n  background-color: var(--bg);\n  color: var(--text-dark);\n  line-height: 1.6;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 0 20px;\n}\n\n.btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  font-weight: 500;\n  transition: all 0.2s;\n}\n\n.btn-primary {\n  background-color: #000000;\n  color: #FFFFFF;\n}\n\n.btn-primary:hover {\n  background-color: #333333;\n}\n\n.btn-secondary {\n  background-color: #000000;\n  color: #FFFFFF;\n}\n\n.btn-secondary:hover {\n  background-color: #333333;\n}\n\n.card {\n  background-color: var(--container);\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n}\n\n.card:hover {\n  box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n  transform: translateY(-2px);\n  transition: all 0.2s;\n}\n\ninput, textarea, select {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid var(--border);\n  border-radius: 6px;\n  font-size: 14px;\n  background-color: white;\n}\n\ninput:focus, textarea:focus, select:focus {\n  outline: none;\n  border-color: var(--filter);\n}\n\n.navbar {\n  background-color: var(--container);\n  padding: 15px 0;\n  border-bottom: 1px solid var(--border);\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n\n.navbar-content {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.navbar-title {\n  font-size: 24px;\n  font-weight: bold;\n  cursor: pointer;\n  color: var(--text-dark);\n  text-decoration: none;\n}\n\n.navbar-menu {\n  display: flex;\n  gap: 20px;\n  align-items: center;\n}\n\n.navbar-menu a {\n  text-decoration: none;\n  color: var(--text-dark);\n  font-weight: 500;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 8px 12px;\n  border-radius: 6px;\n  transition: background-color 0.2s;\n}\n\n.navbar-menu a:hover {\n  background-color: var(--popup);\n}\n\n/* Navbar buttons with .btn class should use global button styles */\n.navbar-menu .btn {\n  /* Inherit from .btn, .btn-primary, .btn-secondary */\n}\n\n.dropdown {\n  position: relative;\n}\n\n.dropdown-menu {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  background-color: var(--popup);\n  border-radius: 6px;\n  box-shadow: 0 4px 8px rgba(0,0,0,0.1);\n  min-width: 150px;\n  margin-top: 5px;\n  z-index: 1000;\n}\n\n.dropdown-menu a, .dropdown-menu button {\n  display: block;\n  padding: 10px 15px;\n  text-decoration: none;\n  color: var(--text-dark);\n  background: transparent;\n  border: none;\n  width: 100%;\n  text-align: left;\n  cursor: pointer;\n}\n\n.dropdown-menu a:hover, .dropdown-menu button:hover {\n  background-color: var(--filter);\n}\n\n/* Dropdown buttons should not use black background */\n.dropdown-menu .btn {\n  background: transparent;\n  color: var(--text-dark);\n  text-align: left;\n  padding: 10px 15px;\n  width: 100%;\n  border-radius: 0;\n}\n\n.dropdown-menu .btn:hover {\n  background-color: var(--filter);\n}\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20px;\n}\n\n@media (max-width: 768px) {\n  .grid {\n    grid-template-columns: 1fr;\n  }\n}\n\n.search-bar {\n  margin: 20px 0;\n}\n\n.filter-panel {\n  background-color: var(--filter);\n  padding: 15px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n\n.section {\n  padding: 60px 0;\n}\n\n.section h2 {\n  font-size: 32px;\n  margin-bottom: 20px;\n}\n\n.section p, .section ul {\n  font-size: 16px;\n  line-height: 1.8;\n  color: var(--text-light);\n}\n\n.section ul {\n  margin-left: 20px;\n}\n\n.section ul li {\n  margin-bottom: 10px;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 5px;\n  font-weight: 500;\n}\n\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  background-color: white;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\ntable th, table td {\n  padding: 12px;\n  text-align: left;\n  border-bottom: 1px solid var(--border);\n}\n\ntable th {\n  background-color: var(--container);\n  font-weight: 600;\n}\n\ntable tr:hover {\n  background-color: var(--bg);\n}\n\n.badge {\n  display: inline-block;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  font-weight: 500;\n  background-color: var(--filter);\n  color: var(--text-dark);\n}\n\n.checkbox-group {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n}\n\n.checkbox-group label {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  cursor: pointer;\n}\n","size_bytes":4534},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"flask>=3.1.2\",\n    \"flask-cors>=6.0.1\",\n    \"flask-sqlalchemy>=3.1.1\",\n    \"google-auth>=2.42.1\",\n    \"google-auth-httplib2>=0.2.1\",\n    \"google-auth-oauthlib>=1.2.2\",\n    \"google-generativeai>=0.8.5\",\n    \"psycopg2-binary>=2.9.11\",\n    \"python-dotenv>=1.2.1\",\n    \"sqlalchemy>=2.0.44\",\n]\n","size_bytes":436},"backend/app/models/models.py":{"content":"from flask_sqlalchemy import SQLAlchemy\nfrom datetime import datetime\n\ndb = SQLAlchemy()\n\nclass User(db.Model):\n    __tablename__ = 'users'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    email = db.Column(db.String(255), unique=True, nullable=False)\n    name = db.Column(db.String(255), nullable=False)\n    google_id = db.Column(db.String(255), unique=True, nullable=False)\n    role = db.Column(db.String(50), nullable=False)  # 'student' or 'teacher'\n    profile_image = db.Column(db.Text)  # Base64 encoded image\n    department = db.Column(db.String(255))\n    experience = db.Column(db.String(255))  # For teachers\n    area_of_interest = db.Column(db.String(255))\n    student_id = db.Column(db.String(100))  # For students\n    year_of_joining = db.Column(db.String(50))  # For students\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    \n    # Relationships\n    courses_taught = db.relationship('Course', backref='teacher', lazy=True, foreign_keys='Course.teacher_id')\n    enrollments = db.relationship('Enrollment', backref='student', lazy=True)\n    reflections = db.relationship('ReflectionSubmission', backref='student', lazy=True)\n\n\nclass Course(db.Model):\n    __tablename__ = 'courses'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    name = db.Column(db.String(255), nullable=False)\n    course_code = db.Column(db.String(100))\n    teacher_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)\n    status = db.Column(db.String(50), default='active')  # 'active', 'archived'\n    framework = db.Column(db.String(100))  # 'Bloom's Taxonomy', '5 WHYs', '1-H', 'Other'\n    start_date = db.Column(db.Date)\n    end_date = db.Column(db.Date)\n    reflection_due_days = db.Column(db.Integer)\n    recurrence_days = db.Column(db.Integer)\n    selected_days = db.Column(db.String(255))  # Comma-separated days\n    custom_structure = db.Column(db.Text)  # JSON string for custom reflection structure\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    \n    # Relationships\n    enrollments = db.relationship('Enrollment', backref='course', lazy=True, cascade='all, delete-orphan')\n    reflections = db.relationship('Reflection', backref='course', lazy=True, cascade='all, delete-orphan')\n\n\nclass Enrollment(db.Model):\n    __tablename__ = 'enrollments'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    student_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)\n    course_id = db.Column(db.Integer, db.ForeignKey('courses.id'), nullable=False)\n    enrolled_at = db.Column(db.DateTime, default=datetime.utcnow)\n    \n    __table_args__ = (db.UniqueConstraint('student_id', 'course_id', name='unique_enrollment'),)\n\n\nclass Reflection(db.Model):\n    __tablename__ = 'reflections'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    course_id = db.Column(db.Integer, db.ForeignKey('courses.id'), nullable=False)\n    name = db.Column(db.String(255), nullable=False)\n    number = db.Column(db.Integer)\n    description = db.Column(db.Text)\n    start_date = db.Column(db.DateTime)\n    due_date = db.Column(db.DateTime)\n    structure = db.Column(db.Text)  # JSON string for reflection structure\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    \n    # Relationships\n    submissions = db.relationship('ReflectionSubmission', backref='reflection', lazy=True, cascade='all, delete-orphan')\n\n\nclass ReflectionSubmission(db.Model):\n    __tablename__ = 'reflection_submissions'\n    \n    id = db.Column(db.Integer, primary_key=True)\n    reflection_id = db.Column(db.Integer, db.ForeignKey('reflections.id'), nullable=False)\n    student_id = db.Column(db.Integer, db.ForeignKey('users.id'), nullable=False)\n    content = db.Column(db.Text)  # JSON string for submission content\n    ai_feedback = db.Column(db.Text)\n    score = db.Column(db.Float)\n    display_feedback = db.Column(db.Boolean, default=False)\n    submitted_at = db.Column(db.DateTime)\n    created_at = db.Column(db.DateTime, default=datetime.utcnow)\n    updated_at = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)\n    \n    __table_args__ = (db.UniqueConstraint('reflection_id', 'student_id', name='unique_submission'),)\n","size_bytes":4207},"main.py":{"content":"def main():\n    print(\"Hello from repl-nix-workspace!\")\n\n\nif __name__ == \"__main__\":\n    main()\n","size_bytes":96},"backend/app/__init__.py":{"content":"from flask import Flask, redirect\nfrom flask_cors import CORS\nfrom .models.models import db\nimport os\n\ndef create_app():\n    app = Flask(__name__)\n    \n    # Configuration\n    app.config['SECRET_KEY'] = os.environ.get('SESSION_SECRET', 'dev-secret-key-change-in-production')\n    app.config['SQLALCHEMY_DATABASE_URI'] = os.environ.get('DATABASE_URL')\n    app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False\n    app.config['GOOGLE_CLIENT_ID'] = os.environ.get('GOOGLE_CLIENT_ID')\n    app.config['GOOGLE_CLIENT_SECRET'] = os.environ.get('GOOGLE_CLIENT_SECRET')\n    \n    # Session configuration for cross-origin cookies\n    app.config['SESSION_COOKIE_SAMESITE'] = 'Lax'\n    app.config['SESSION_COOKIE_HTTPONLY'] = True\n    app.config['SESSION_COOKIE_SECURE'] = False  # Set to True in production with HTTPS\n    \n    # Initialize extensions\n    CORS(app, \n         supports_credentials=True,\n         origins=['http://localhost:5000', 'http://127.0.0.1:5000', 'https://*.replit.app', 'https://*.replit.dev'],\n         allow_headers=['Content-Type', 'Authorization'],\n         expose_headers=['Set-Cookie'],\n         methods=['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'])\n    db.init_app(app)\n    \n    # Root route - API health check\n    @app.route('/')\n    def index():\n        return {'status': 'ok', 'message': 'RJMS API is running'}\n    \n    # Register blueprints\n    from .routes import auth, courses, students, teacher, reflections\n    app.register_blueprint(auth.bp)\n    app.register_blueprint(courses.bp)\n    app.register_blueprint(students.bp)\n    app.register_blueprint(teacher.bp)\n    app.register_blueprint(reflections.bp)\n    \n    # Create tables\n    with app.app_context():\n        db.create_all()\n    \n    return app\n","size_bytes":1725},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"backend/app/routes/students.py":{"content":"from flask import Blueprint, request, jsonify, session, send_file\nfrom ..models.models import db, User, Enrollment, Course\nfrom ..utils.auth_utils import teacher_required\nimport io\n\nbp = Blueprint('students', __name__, url_prefix='/api/students')\n\n@bp.route('/course/<int:course_id>', methods=['GET'])\n@teacher_required\ndef get_course_students(course_id):\n    \"\"\"Get all students enrolled in a course\"\"\"\n    course = Course.query.get_or_404(course_id)\n    \n    if course.teacher_id != session['user_id']:\n        return jsonify({'error': 'Access denied'}), 403\n    \n    enrollments = Enrollment.query.filter_by(course_id=course_id).all()\n    students = [e.student for e in enrollments]\n    \n    return jsonify({\n        'students': [{\n            'id': s.id,\n            'name': s.name,\n            'email': s.email,\n            'profile_image': s.profile_image,\n            'enrolled_at': Enrollment.query.filter_by(student_id=s.id, course_id=course_id).first().enrolled_at.isoformat()\n        } for s in students]\n    }), 200\n\n@bp.route('/course/<int:course_id>', methods=['POST'])\n@teacher_required\ndef add_student_to_course(course_id):\n    \"\"\"Add a student to a course\"\"\"\n    course = Course.query.get_or_404(course_id)\n    \n    if course.teacher_id != session['user_id']:\n        return jsonify({'error': 'Access denied'}), 403\n    \n    data = request.get_json()\n    email = data.get('email')\n    name = data.get('name', '')\n    \n    if not email:\n        return jsonify({'error': 'Email is required'}), 400\n    \n    # Check if student exists\n    student = User.query.filter_by(email=email, role='student').first()\n    \n    if not student:\n        # Create new student user if they don't exist\n        student = User(\n            email=email,\n            name=name if name else email.split('@')[0],\n            google_id=f'manual_{email}_{course_id}',\n            role='student'\n        )\n        db.session.add(student)\n        db.session.flush()  # Get the student ID before enrolling\n    \n    # Check if already enrolled\n    existing = Enrollment.query.filter_by(student_id=student.id, course_id=course_id).first()\n    if existing:\n        return jsonify({'error': 'Student already enrolled'}), 400\n    \n    enrollment = Enrollment(student_id=student.id, course_id=course_id)\n    db.session.add(enrollment)\n    db.session.commit()\n    \n    return jsonify({\n        'message': 'Student added successfully',\n        'student': {\n            'id': student.id,\n            'name': student.name,\n            'email': student.email\n        }\n    }), 201\n\n@bp.route('/course/<int:course_id>/bulk', methods=['POST'])\n@teacher_required\ndef bulk_add_students(course_id):\n    \"\"\"Add multiple students from uploaded list\"\"\"\n    course = Course.query.get_or_404(course_id)\n    \n    if course.teacher_id != session['user_id']:\n        return jsonify({'error': 'Access denied'}), 403\n    \n    data = request.get_json()\n    students_data = data.get('students', [])\n    \n    added = 0\n    for student_info in students_data:\n        email = student_info.get('email')\n        if not email:\n            continue\n        \n        student = User.query.filter_by(email=email, role='student').first()\n        if not student:\n            # Create new student user\n            student = User(\n                email=email,\n                name=student_info.get('name', email.split('@')[0]),\n                google_id=f'manual_{email}',\n                role='student'\n            )\n            db.session.add(student)\n            db.session.flush()\n        \n        # Check if already enrolled\n        existing = Enrollment.query.filter_by(student_id=student.id, course_id=course_id).first()\n        if not existing:\n            enrollment = Enrollment(student_id=student.id, course_id=course_id)\n            db.session.add(enrollment)\n            added += 1\n    \n    db.session.commit()\n    \n    return jsonify({'message': f'{added} students added successfully'}), 201\n\n@bp.route('/<int:student_id>/course/<int:course_id>', methods=['DELETE'])\n@teacher_required\ndef remove_student_from_course(student_id, course_id):\n    \"\"\"Remove a student from a course\"\"\"\n    course = Course.query.get_or_404(course_id)\n    \n    if course.teacher_id != session['user_id']:\n        return jsonify({'error': 'Access denied'}), 403\n    \n    enrollment = Enrollment.query.filter_by(student_id=student_id, course_id=course_id).first_or_404()\n    \n    db.session.delete(enrollment)\n    db.session.commit()\n    \n    return jsonify({'message': 'Student removed successfully'}), 200\n\n@bp.route('/sample-format', methods=['GET'])\n@teacher_required\ndef download_sample_format():\n    \"\"\"Download sample CSV format for student list upload\"\"\"\n    # Create sample CSV content\n    csv_content = \"\"\"name,email\nJohn Doe,john.doe@example.com\nJane Smith,jane.smith@example.com\nBob Johnson,bob.johnson@example.com\"\"\"\n    \n    # Create a BytesIO object to send as file\n    buffer = io.BytesIO()\n    buffer.write(csv_content.encode('utf-8'))\n    buffer.seek(0)\n    \n    return send_file(\n        buffer,\n        mimetype='text/csv',\n        as_attachment=True,\n        download_name='student_upload_sample.csv'\n    )\n","size_bytes":5161},"replit.md":{"content":"# RJMS - Reflection Journal Management System\n\n## Overview\n\nRJMS is an educational web application that enables structured reflection journaling for students and teachers. The system supports multiple reflection frameworks (Bloom's Taxonomy, 5 WHYs, 1-H, Other/Custom), manages course enrollments, handles reflection submissions, and provides AI-generated feedback mechanisms. Teachers can create courses with configurable reflection schedules with preview functionality, while students submit reflections and receive feedback. Both teachers and students can maintain detailed profiles with image uploads.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Technology Stack:**\n- Vue.js 3 with Composition API\n- Vue Router for client-side routing\n- Axios for HTTP requests\n- Vite as build tool and dev server\n\n**Design Decisions:**\n- **Component-Based Architecture**: The application uses Vue's component system to organize UI into reusable pieces separated by user role (student/teacher views)\n- **Route-Based Code Splitting**: Router configuration splits views into student and teacher sections with role-based access control using route meta fields\n- **Proxy Configuration**: Vite dev server proxies `/api` requests to the Flask backend (port 5001), enabling seamless local development without CORS issues\n- **Custom CSS Variables**: Uses a custom color palette (bg-FFF7ED, containers-FBEAD3, popup-F9DDBB, filter-C4B49E) for consistent theming\n- **Framework Pre-population**: Course configuration automatically populates reflection structures based on selected framework (Bloom's Taxonomy, 5 WHYs, 1-H)\n- **Reflection Preview**: Teachers can preview and deselect specific reflection dates before creating reflections\n- **Profile Management**: Comprehensive profile pages for teachers and students with circular image upload, Remove/Update options, and role-specific fields\n\n**Port Configuration:**\n- Frontend runs on port 5173 (Vite default)\n- Note: There's a discrepancy in vite.config.js (shows port 5000) vs standard Vite setup\n\n### Backend Architecture\n\n**Technology Stack:**\n- Flask (Python) web framework\n- Flask-SQLAlchemy ORM\n- Flask-CORS for cross-origin requests\n- PostgreSQL database\n\n**Design Decisions:**\n- **Blueprint-Based Routing**: API routes are organized into logical blueprints (auth, courses, students, teacher, reflections) for modularity and maintainability\n- **Session-Based Authentication**: Uses Flask sessions for user authentication state management instead of JWT tokens\n- **Decorator-Based Authorization**: Custom decorators (`@login_required`, `@teacher_required`, `@student_required`) enforce role-based access control at the route level\n- **SQLAlchemy Models**: Database schema defined using SQLAlchemy ORM with relationships between User, Course, Enrollment, Reflection, and ReflectionSubmission entities\n- **Demo Mode Support**: Google OAuth integration includes demo/development mode bypassing actual token verification for easier testing\n\n**API Structure:**\n- `/api/auth/*` - Authentication endpoints (login, logout, profile management)\n  - `PUT /api/auth/profile` - Update user profile with validation for image size/format\n- `/api/courses/*` - Course management\n- `/api/students/*` - Student enrollment operations\n- `/api/teacher/*` - Teacher-specific analytics and overview\n- `/api/reflections/*` - Reflection submission and retrieval\n\n**Port Configuration:**\n- Backend runs on port 5001 (configurable via PORT environment variable)\n\n### Database Schema\n\n**Core Entities:**\n\n1. **Users** - Stores both students and teachers with role differentiation and profile information\n   - Fields: id, email, name, google_id, role, profile_image (TEXT/base64), department, experience, area_of_interest, student_id, year_of_joining, created_at\n   - Role can be 'student' or 'teacher'\n   - Profile images stored as base64-encoded data URLs with 2MB size limit\n   - Role-specific fields: experience (teachers), student_id and year_of_joining (students)\n\n2. **Courses** - Teacher-created courses with reflection configuration\n   - Fields: id, name, course_code, teacher_id, status, framework, start_date, end_date, reflection_due_days, recurrence_days, selected_days, custom_structure\n   - Supports multiple reflection frameworks and custom structures (stored as JSON)\n\n3. **Enrollments** - Many-to-many relationship between students and courses\n   - Fields: id, student_id, course_id, enrolled_at\n\n4. **Reflections** - Individual reflection assignments within courses\n   - Fields: id, course_id, name, number, description, start_date, due_date, structure\n\n5. **ReflectionSubmissions** - Student submissions with feedback\n   - Fields: id, reflection_id, student_id, content, submitted_at, ai_feedback, display_feedback, teacher_score\n\n**Relationships:**\n- One-to-many: Teacher â†’ Courses\n- Many-to-many: Students â†” Courses (via Enrollments)\n- One-to-many: Course â†’ Reflections\n- One-to-many: Reflection â†’ Submissions\n- Cascade deletes configured for course-related entities\n\n### Authentication & Authorization\n\n**OAuth Integration:**\n- Google OAuth 2.0 for user authentication\n- Development mode allows bypassing real Google verification\n- Session-based state management stores user_id and role\n\n**Access Control:**\n- Role-based access at route level using decorators\n- Session validation on protected endpoints\n- Teacher-student data isolation (teachers only access their courses, students only their enrollments)\n\n## External Dependencies\n\n### Third-Party Services\n\n1. **Google OAuth 2.0**\n   - Purpose: User authentication\n   - Configuration: Requires GOOGLE_CLIENT_ID and GOOGLE_CLIENT_SECRET environment variables\n   - Demo mode available for development\n\n2. **PostgreSQL Database**\n   - Purpose: Primary data store\n   - Configuration: DATABASE_URL environment variable (auto-provisioned on Replit)\n   - ORM: SQLAlchemy\n\n### Frontend Dependencies\n\n- **vue** (^3.5.13) - Core framework\n- **vue-router** (^4.5.0) - Client-side routing\n- **axios** (^1.7.9) - HTTP client\n- **@vitejs/plugin-vue** - Vite integration\n- **vite** (^5.4.20) - Build tool and dev server\n\n### Backend Dependencies\n\n- **Flask** - Web framework\n- **Flask-SQLAlchemy** - Database ORM\n- **Flask-CORS** - Cross-origin resource sharing\n- **google-auth** - OAuth token verification (for production)\n\n### Development Tools\n\n- **Drizzle Kit** - Database migration tool (configured but may not be actively used with Flask-SQLAlchemy)\n- **PostCSS** with Autoprefixer - CSS processing\n- **TailwindCSS** - Utility-first CSS framework (configured via components.json)\n\n### Environment Variables Required\n\n- `DATABASE_URL` - PostgreSQL connection string\n- `SECRET_KEY` - Flask session secret\n- `GOOGLE_CLIENT_ID` - OAuth client ID\n- `GOOGLE_CLIENT_SECRET` - OAuth client secret\n- `PORT` - Backend server port (defaults to 5001)","size_bytes":6908},"START_HERE.md":{"content":"# ðŸš€ Quick Start Guide for RJMS\n\nYour application is ready! Follow these simple steps to run it:\n\n## Option 1: Automated Start (Recommended)\n\nOpen the Shell and run:\n```bash\n./run_rjms.sh\n```\n\nThis will start both the backend and frontend automatically.\n\n## Option 2: Manual Start\n\nIf the automated script doesn't work, open **TWO** separate Shell tabs:\n\n### Shell Tab 1 - Backend\n```bash\ncd backend\npython run.py\n```\n\nWait until you see: `Running on http://127.0.0.1:5000`\n\n### Shell Tab 2 - Frontend\n```bash\ncd frontend\nnpm run dev\n```\n\nWait until you see the local URL (usually `http://localhost:5173`)\n\n## ðŸŒ Access the Application\n\nOnce both services are running:\n1. Click the **\"Open in a new tab\"** button in the Webview\n2. Or click the **Webview** tab in Replit\n\n## ðŸ§ª Test the Login Flow\n\n1. On the home page, click the **\"Login\"** button in the navigation bar\n2. Select either **\"Student\"** or **\"Teacher\"** from the dropdown\n3. You'll land on a dedicated login page\n4. Enter any email and name (e.g., `test@example.com`, `John Doe`)\n5. Click **\"Sign in with Google (Demo Mode)\"**\n6. You'll be redirected to the respective dashboard!\n\n### Student Login Test:\n- Email: `student@test.com`\n- Name: `Test Student`\n\n### Teacher Login Test:\n- Email: `teacher@test.com`\n- Name: `Test Teacher`\n\n## âœ… What's Working\n\n- âœ“ Home page with Login dropdown (Student/Teacher options)\n- âœ“ Dedicated Student login page (`/login/student`)\n- âœ“ Dedicated Teacher login page (`/login/teacher`)\n- âœ“ Google OAuth demo mode\n- âœ“ Student dashboard and all features\n- âœ“ Teacher dashboard and all features\n- âœ“ PostgreSQL database with all tables\n- âœ“ Full API backend with Flask\n\n## ðŸŽ¨ Design\n\nThe application uses your exact color palette:\n- Background: `#FFF7ED`\n- Containers: `#FBEAD3`\n- Buttons/Popups: `#F9DDBB`\n- Filters: `#C4B49E`\n\n## ðŸ“š Full Documentation\n\nSee `README.md` for complete documentation including:\n- API endpoints\n- Database schema\n- Feature list\n- Production deployment guide\n\n---\n\n**Need help?** Check that both services (backend and frontend) are running in separate Shell tabs.\n","size_bytes":2111},"backend/app/routes/auth.py":{"content":"from flask import Blueprint, request, jsonify, session\nfrom google.oauth2 import id_token\nfrom google.auth.transport import requests\nfrom ..models.models import db, User\nimport os\n\nbp = Blueprint('auth', __name__, url_prefix='/api/auth')\n\n@bp.route('/google', methods=['POST'])\ndef google_auth():\n    \"\"\"Handle Google OAuth authentication\"\"\"\n    try:\n        data = request.get_json()\n        token = data.get('token')\n        role = data.get('role')  # 'student' or 'teacher'\n        \n        if not token or not role or role not in ['student', 'teacher']:\n            return jsonify({'error': 'Invalid request'}), 400\n        \n        # Verify the Google token\n        google_client_id = os.environ.get('GOOGLE_CLIENT_ID')\n        \n        # Ensure GOOGLE_CLIENT_ID is configured\n        if not google_client_id:\n            print('CRITICAL: GOOGLE_CLIENT_ID environment variable is not set')\n            return jsonify({'error': 'Authentication service is not configured'}), 500\n        \n        # Verify the token with Google\n        try:\n            idinfo = id_token.verify_oauth2_token(token, requests.Request(), google_client_id)\n            \n            # Explicitly verify the audience (client ID)\n            if idinfo.get('aud') != google_client_id:\n                print(f'Token audience mismatch: expected {google_client_id}, got {idinfo.get(\"aud\")}')\n                return jsonify({'error': 'Invalid token audience'}), 401\n                \n        except ValueError as e:\n            print(f'Token verification failed: {str(e)}')\n            return jsonify({'error': 'Invalid token'}), 401\n        \n        google_id = idinfo['sub']\n        email = idinfo['email']\n        name = idinfo.get('name', email.split('@')[0])\n        picture = idinfo.get('picture', '')\n        \n        # Check if user exists by email (for demo mode compatibility)\n        user = User.query.filter_by(email=email).first()\n        \n        if not user:\n            # Create new user\n            user = User(\n                email=email,\n                name=name,\n                google_id=google_id,\n                role=role,\n                profile_image=picture\n            )\n            db.session.add(user)\n            db.session.commit()\n        elif user.role != role:\n            return jsonify({'error': f'This account is registered as a {user.role}. Please use the {user.role} login page.'}), 403\n        else:\n            # Update google_id for existing user (in case it's a demo login)\n            if user.google_id != google_id:\n                user.google_id = google_id\n                db.session.commit()\n        \n        # Set session\n        session['user_id'] = user.id\n        session['user_role'] = user.role\n        \n        return jsonify({\n            'user': {\n                'id': user.id,\n                'email': user.email,\n                'name': user.name,\n                'role': user.role,\n                'profile_image': user.profile_image\n            }\n        }), 200\n        \n    except Exception as e:\n        print(f'Auth error: {str(e)}')\n        return jsonify({'error': 'Authentication failed'}), 401\n\n@bp.route('/logout', methods=['POST'])\ndef logout():\n    \"\"\"Logout user\"\"\"\n    session.clear()\n    return jsonify({'message': 'Logged out successfully'}), 200\n\n@bp.route('/me', methods=['GET'])\ndef get_current_user():\n    \"\"\"Get current logged in user\"\"\"\n    if 'user_id' not in session:\n        return jsonify({'error': 'Not authenticated'}), 401\n    \n    user = User.query.get(session['user_id'])\n    if not user:\n        session.clear()\n        return jsonify({'error': 'User not found'}), 404\n    \n    return jsonify({\n        'user': {\n            'id': user.id,\n            'email': user.email,\n            'name': user.name,\n            'role': user.role,\n            'profile_image': user.profile_image,\n            'department': user.department,\n            'experience': user.experience,\n            'area_of_interest': user.area_of_interest,\n            'student_id': user.student_id,\n            'year_of_joining': user.year_of_joining\n        }\n    }), 200\n\n@bp.route('/profile', methods=['PUT'])\ndef update_profile():\n    \"\"\"Update user profile\"\"\"\n    if 'user_id' not in session:\n        return jsonify({'error': 'Not authenticated'}), 401\n    \n    user = User.query.get(session['user_id'])\n    if not user:\n        return jsonify({'error': 'User not found'}), 404\n    \n    data = request.get_json()\n    \n    # Update allowed fields\n    if 'name' in data:\n        user.name = data['name']\n    if 'department' in data:\n        user.department = data['department']\n    if 'area_of_interest' in data:\n        user.area_of_interest = data['area_of_interest']\n    \n    # Teacher-specific fields\n    if user.role == 'teacher' and 'experience' in data:\n        user.experience = data['experience']\n    \n    # Student-specific fields\n    if user.role == 'student':\n        if 'student_id' in data:\n            user.student_id = data['student_id']\n        if 'year_of_joining' in data:\n            user.year_of_joining = data['year_of_joining']\n    \n    # Profile image (base64) - validate size\n    if 'profile_image' in data:\n        image_data = data['profile_image']\n        if image_data:\n            # Check if it's a valid base64 data URL\n            if not image_data.startswith('data:image/'):\n                return jsonify({'error': 'Invalid image format'}), 400\n            \n            # Estimate base64 size (approximately 4/3 of original)\n            # Limit to ~2.7MB base64 (2MB original)\n            if len(image_data) > 2.7 * 1024 * 1024:\n                return jsonify({'error': 'Image too large. Maximum size is 2MB'}), 400\n            \n            user.profile_image = image_data\n        else:\n            # Allow null to remove image\n            user.profile_image = None\n    \n    try:\n        db.session.commit()\n    except Exception as e:\n        db.session.rollback()\n        print(f'Error updating profile: {str(e)}')\n        return jsonify({'error': 'Failed to update profile'}), 500\n    \n    return jsonify({\n        'message': 'Profile updated successfully',\n        'user': {\n            'id': user.id,\n            'email': user.email,\n            'name': user.name,\n            'role': user.role,\n            'profile_image': user.profile_image,\n            'department': user.department,\n            'experience': user.experience,\n            'area_of_interest': user.area_of_interest,\n            'student_id': user.student_id,\n            'year_of_joining': user.year_of_joining\n        }\n    }), 200\n","size_bytes":6581},"vite.config.js":{"content":"import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport path from 'path'\n\nexport default defineConfig({\n  plugins: [vue()],\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src')\n    }\n  },\n  server: {\n    host: '0.0.0.0',\n    port: 5173,\n    proxy: {\n      '/api': {\n        target: 'http://localhost:5000',\n        changeOrigin: true\n      }\n    }\n  }\n})\n","size_bytes":396},"backend/run.py":{"content":"from app import create_app\nimport os\n\napp = create_app()\n\nif __name__ == '__main__':\n    port = int(os.environ.get('PORT', 5001))\n    app.run(host='0.0.0.0', port=port, debug=True)\n","size_bytes":181},"design_guidelines.md":{"content":"# Educational Q&A App - Design Guidelines\n\n## Design Approach\n\n**Selected System:** Material Design with Notion/Linear productivity influences for the editing experience. This combination provides clear visual hierarchy for content-dense educational material while delivering intuitive editing capabilities that feel modern and efficient.\n\n**Core Principles:**\n- Clarity and readability for educational content\n- Efficient content management workflows\n- Clear visual feedback for all interactions\n- Scannable question/answer hierarchies\n\n## Typography System\n\n**Font Families:**\n- Primary: Inter (via Google Fonts) - UI elements, navigation, labels\n- Content: Source Serif Pro (via Google Fonts) - Questions and answers for enhanced readability\n\n**Hierarchy:**\n- Page Titles: 2.5rem (40px), semibold, tight letter-spacing\n- Section Headers: 1.5rem (24px), medium weight\n- Question Text: 1.125rem (18px), regular weight, Source Serif Pro\n- Answer Options: 1rem (16px), regular weight\n- Labels/Meta: 0.875rem (14px), medium weight\n- Buttons/Actions: 0.9375rem (15px), medium weight\n\n## Layout System\n\n**Spacing Primitives:** Tailwind units of 2, 4, 6, and 8 for consistent rhythm\n- Component padding: p-6\n- Section spacing: gap-8 or space-y-8\n- Card spacing: p-8\n- Tight spacing: gap-4\n- Form elements: space-y-6\n\n**Grid Structure:**\n- Main container: max-w-6xl mx-auto px-6\n- Two-column layout for desktop (question list + detail view)\n- Sidebar: w-80 (320px) for filters/navigation\n- Content area: flex-1 for primary content\n\n## Component Library\n\n### Navigation & Header\n- Fixed top navigation bar with app branding (left), search bar (center), and create button (right)\n- Height: h-16\n- Search bar: Prominent, expands to w-96 on focus\n- Primary CTA: \"Create Question\" button with icon\n\n### Question List View\n- Card-based layout with elevated appearance\n- Each card displays:\n  - Question text (truncated to 2 lines)\n  - Number of answers\n  - Correct answer indicator (checkmark badge)\n  - Last edited timestamp\n  - Quick action icons (edit, delete) on hover\n- Card spacing: gap-4 in vertical list\n- Pagination or infinite scroll for large lists\n\n### Question Detail/Edit Interface\n- Split-pane design:\n  - Left: Question editor with rich text capabilities\n  - Right: Answer options list with drag-to-reorder\n- Question editor: Large text area with min-h-32\n- Answer input: List of answer cards with:\n  - Text input field\n  - Radio button to mark as correct\n  - Delete icon\n  - Drag handle for reordering\n- \"Add Answer\" button at bottom of answer list\n\n### Search & Filter Panel\n- Sticky sidebar with:\n  - Search input at top\n  - Filter chips for question status (all, answered, unanswered)\n  - Sort dropdown (newest, oldest, most answers)\n  - Category tags if applicable\n\n### Forms & Inputs\n- Floating label style for text inputs\n- Input fields: h-12 with rounded-lg borders\n- Textarea: min-h-24 for question input\n- Radio buttons: Larger touch targets (w-5 h-5)\n- Checkboxes: Custom styled with checkmark icon\n\n### Action Buttons\n- Primary: Filled style with subtle shadow\n- Secondary: Outlined style\n- Danger: Outlined with warning indication\n- Icon buttons: w-10 h-10 circular with centered icons\n- Button groups: gap-3 for spacing\n\n### Cards & Containers\n- Standard card: rounded-xl with subtle elevation\n- Hover state: Slight elevation increase\n- Active/selected: Highlighted border treatment\n- Padding: p-6 for standard cards, p-8 for detail views\n\n### Modals & Overlays\n- Delete confirmation: Centered modal with max-w-md\n- Success notifications: Top-right toast notifications\n- Modal backdrop: Semi-transparent overlay\n- Modal content: rounded-2xl with generous padding (p-8)\n\n### Status Indicators\n- Correct answer badge: Small pill with checkmark icon\n- Answer count: Circular badge showing number\n- Timestamps: Subtle text with clock icon\n- Empty states: Centered illustration with helpful text\n\n### Icons\n**Library:** Heroicons (via CDN)\n- Navigation: outline style, 24px\n- Actions: outline style, 20px\n- Status indicators: solid style, 16px\n- Consistent icon usage: edit (pencil), delete (trash), add (plus), search (magnifying glass), correct (check-circle)\n\n## Responsive Behavior\n\n**Desktop (lg and above):**\n- Two-column layout: sidebar + main content\n- Question detail opens in right pane\n- Persistent filters and search\n\n**Tablet (md):**\n- Single column with collapsible sidebar\n- Question detail replaces list view\n- Back button to return to list\n\n**Mobile:**\n- Stacked single-column layout\n- Bottom navigation for key actions\n- Simplified filters in dropdown\n- Full-screen question editor\n\n## Interaction Patterns\n\n**Question Management:**\n- Click question card to open detail view\n- Inline editing with \"Edit\" button toggle\n- Auto-save indicator during editing\n- Clear save/cancel actions\n\n**Answer Management:**\n- Add answers with visible \"+ Add Answer\" button\n- Drag handles for reordering (desktop only)\n- Single radio selection for correct answer\n- Immediate visual feedback on selection\n\n**Deletion:**\n- Two-step confirmation for question deletion\n- Single-click deletion for answers (with undo option)\n- Clear destructive action styling\n\n## Images\n\n**Hero Section:** No large hero image - this is a productivity tool focused on immediate functionality\n\n**Empty States:**\n- Illustration for \"No questions yet\" state\n- Simple, friendly educational-themed graphics\n- Placed in center of empty question list area\n- Dimensions: approximately 200x200px, centered with message below\n\n**Icons Only:** All other visuals use icon library - no decorative images needed for this utility-focused application","size_bytes":5625},"README.md":{"content":"# RJMS - Reflection Journal Management System\n\nA comprehensive web application for managing educational reflection journals, designed for both teachers and students.\n\n## Tech Stack\n\n- **Frontend**: Vue.js 3 with Vue Router\n- **Backend**: Flask (Python)\n- **Database**: PostgreSQL\n- **Authentication**: Google OAuth (Demo mode included)\n\n## Color Palette\n\n- Background: `#FFF7ED`\n- Containers: `#FBEAD3`\n- Pop-up/Buttons: `#F9DDBB`\n- Course Filter: `#C4B49E`\n\n## Features\n\n### For Students\n- View enrolled courses\n- Access reflection journals with deadlines\n- Submit reflections\n- View AI-generated feedback (when approved by teacher)\n- Dashboard with due/overdue assignments\n- Profile management\n\n### For Teachers\n- Create and manage courses\n- Configure reflection frameworks (Bloom's Taxonomy, 5 WHYs, 1-H)\n- Manage student enrollments\n- View reflection submissions\n- Provide scores and approve AI feedback\n- Course overview and analytics\n\n## Setup Instructions\n\n### Prerequisites\n- Python 3.11+\n- Node.js 18+\n- PostgreSQL database (automatically provided by Replit)\n\n### 1. Environment Variables\n\nThe following environment variables are already configured in Replit:\n- `DATABASE_URL` - PostgreSQL connection string\n- `SESSION_SECRET` - Flask session secret key\n\nFor Google OAuth in production, you'll need to add:\n- `GOOGLE_CLIENT_ID` - Your Google OAuth Client ID\n- `GOOGLE_CLIENT_SECRET` - Your Google OAuth Client Secret\n\n**Note**: The app currently runs in **demo mode** which allows you to login without actual Google OAuth credentials. Simply enter your email and name to test the application.\n\n### 2. Install Dependencies\n\n#### Backend (Python/Flask)\n```bash\ncd backend\npip install -r requirements.txt\n```\n\nDependencies are automatically installed by Replit when you use the packager tool.\n\n#### Frontend (Vue.js)\n```bash\ncd frontend\nnpm install\n```\n\n### 3. Database Setup\n\nThe PostgreSQL database is automatically created by Replit. The Flask application will create all necessary tables on first run.\n\n### 4. Running the Application\n\n#### Development Mode\n\n**Option 1: Using the provided startup script (Recommended)**\n```bash\nchmod +x start.sh\n./start.sh\n```\n\nThis will start both the Flask backend (port 5000) and Vue.js frontend (port 5173).\n\n**Option 2: Run manually**\n\nTerminal 1 - Backend:\n```bash\ncd backend\npython run.py\n```\n\nTerminal 2 - Frontend:\n```bash\ncd frontend\nnpm run dev\n```\n\n### 5. Accessing the Application\n\n- Frontend: http://localhost:5173 (or Replit webview)\n- Backend API: http://localhost:5000/api\n\n## Application Structure\n\n```\n.\nâ”œâ”€â”€ backend/\nâ”‚   â”œâ”€â”€ app/\nâ”‚   â”‚   â”œâ”€â”€ models/\nâ”‚   â”‚   â”‚   â””â”€â”€ models.py          # Database models\nâ”‚   â”‚   â”œâ”€â”€ routes/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ auth.py            # Authentication routes\nâ”‚   â”‚   â”‚   â”œâ”€â”€ courses.py         # Course management\nâ”‚   â”‚   â”‚   â”œâ”€â”€ students.py        # Student management\nâ”‚   â”‚   â”‚   â”œâ”€â”€ teacher.py         # Teacher-specific routes\nâ”‚   â”‚   â”‚   â””â”€â”€ reflections.py     # Reflection journal routes\nâ”‚   â”‚   â”œâ”€â”€ utils/\nâ”‚   â”‚   â”‚   â””â”€â”€ auth_utils.py      # Authentication utilities\nâ”‚   â”‚   â””â”€â”€ __init__.py            # Flask app factory\nâ”‚   â””â”€â”€ run.py                      # Application entry point\nâ”œâ”€â”€ frontend/\nâ”‚   â”œâ”€â”€ src/\nâ”‚   â”‚   â”œâ”€â”€ assets/\nâ”‚   â”‚   â”‚   â””â”€â”€ main.css           # Global styles with color palette\nâ”‚   â”‚   â”œâ”€â”€ components/            # Reusable Vue components\nâ”‚   â”‚   â”œâ”€â”€ router/\nâ”‚   â”‚   â”‚   â””â”€â”€ index.js           # Vue Router configuration\nâ”‚   â”‚   â”œâ”€â”€ views/\nâ”‚   â”‚   â”‚   â”œâ”€â”€ Home.vue           # Landing page\nâ”‚   â”‚   â”‚   â”œâ”€â”€ StudentLogin.vue   # Student login\nâ”‚   â”‚   â”‚   â”œâ”€â”€ TeacherLogin.vue   # Teacher login\nâ”‚   â”‚   â”‚   â”œâ”€â”€ student/           # Student views\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentHome.vue\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentCourse.vue\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentDashboard.vue\nâ”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StudentProfile.vue\nâ”‚   â”‚   â”‚   â”‚   â””â”€â”€ ReflectionDetails.vue\nâ”‚   â”‚   â”‚   â””â”€â”€ teacher/           # Teacher views\nâ”‚   â”‚   â”‚       â”œâ”€â”€ TeacherHome.vue\nâ”‚   â”‚   â”‚       â”œâ”€â”€ CourseOverview.vue\nâ”‚   â”‚   â”‚       â”œâ”€â”€ CourseConfiguration.vue\nâ”‚   â”‚   â”‚       â”œâ”€â”€ ManageStudents.vue\nâ”‚   â”‚   â”‚       â”œâ”€â”€ CourseReflections.vue\nâ”‚   â”‚   â”‚       â””â”€â”€ ReflectionSubmissions.vue\nâ”‚   â”‚   â”œâ”€â”€ App.vue                # Root component\nâ”‚   â”‚   â””â”€â”€ main.js                # Application entry point\nâ”‚   â”œâ”€â”€ index.html\nâ”‚   â”œâ”€â”€ vite.config.js\nâ”‚   â””â”€â”€ package.json\nâ””â”€â”€ README.md\n```\n\n## Using the Application\n\n### First Time Setup\n\n1. **Access the Home Page**: Navigate to the root URL to see the landing page with Product, Features, and About Us sections.\n\n2. **Login**: Click the \"Login\" dropdown button in the navigation bar and choose either:\n   - **Student** - For student access\n   - **Teacher** - For teacher access\n\n3. **Demo Mode**: Enter any email and name to login (no Google account required in demo mode)\n\n### As a Teacher\n\n1. **Create a Course**:\n   - Click \"Add New Course\" on the teacher home page\n   - Enter course name and optional course code\n   - Click \"Create Course\"\n\n2. **Configure Course**:\n   - Click on a course to view details\n   - Navigate to \"Configure\" from the side panel\n   - Set reflection framework, dates, recurrence, and days\n   - Click \"Submit Configuration\"\n\n3. **Manage Students**:\n   - Navigate to \"Manage Students\" from the side panel\n   - Click \"Add Student\" and enter student email\n   - Select multiple students and delete if needed\n\n4. **View Reflections**:\n   - Navigate to \"Reflections\" from the side panel\n   - Click on a reflection to view all student submissions\n   - Enter scores and approve AI feedback for students\n\n### As a Student\n\n1. **View Courses**:\n   - See all enrolled courses on the student home page\n   - Use search and filters to find specific courses\n\n2. **Access Reflections**:\n   - Click on a course to see all reflection journals\n   - Click on a reflection to view details and submit\n\n3. **Submit Reflection**:\n   - Write your reflection in the text area\n   - Click \"Submit\" to save your work\n   - View teacher feedback when available\n\n4. **Dashboard**:\n   - Click \"Dashboard\" to see all due and overdue reflections\n   - Sort by dates or courses\n   - Click on any reflection to navigate directly to it\n\n## API Endpoints\n\n### Authentication\n- `POST /api/auth/google` - Google OAuth login\n- `POST /api/auth/logout` - Logout\n- `GET /api/auth/me` - Get current user\n\n### Courses\n- `GET /api/courses` - Get all courses (filtered by role)\n- `GET /api/courses/:id` - Get course details\n- `POST /api/courses` - Create new course (teacher only)\n- `PUT /api/courses/:id/configure` - Configure course (teacher only)\n\n### Students\n- `GET /api/students/course/:courseId` - Get course students (teacher only)\n- `POST /api/students/course/:courseId` - Add student to course (teacher only)\n- `DELETE /api/students/:studentId/course/:courseId` - Remove student (teacher only)\n\n### Reflections\n- `GET /api/reflections/course/:courseId` - Get course reflections\n- `GET /api/reflections/:id` - Get reflection details\n- `POST /api/reflections/submit` - Submit reflection (student only)\n- `GET /api/reflections/:id/submissions` - Get all submissions (teacher only)\n- `PUT /api/reflections/submission/:id/update` - Update score/feedback (teacher only)\n- `GET /api/reflections/dashboard` - Get student dashboard (student only)\n\n### Teacher\n- `GET /api/teacher/course/:courseId/overview` - Get course overview stats (teacher only)\n\n## Production Deployment\n\n### Google OAuth Setup\n\nTo enable real Google OAuth in production:\n\n1. Go to [Google Cloud Console](https://console.cloud.google.com/)\n2. Create a new project or select existing one\n3. Enable Google+ API\n4. Create OAuth 2.0 credentials\n5. Add authorized redirect URIs:\n   - `http://localhost:5000/api/auth/google/callback` (development)\n   - `https://your-domain.com/api/auth/google/callback` (production)\n6. Set environment variables:\n   ```\n   GOOGLE_CLIENT_ID=your_client_id\n   GOOGLE_CLIENT_SECRET=your_client_secret\n   ```\n7. Update `backend/app/routes/auth.py` to use real Google token verification\n\n### Security Considerations\n\n- Change `SECRET_KEY` to a strong random value in production\n- Enable HTTPS for all production traffic\n- Use environment variables for all sensitive data\n- Implement rate limiting on API endpoints\n- Add CSRF protection for forms\n- Enable database backups\n- Implement proper error logging\n\n## Troubleshooting\n\n### Backend Issues\n\n**Database connection error**:\n- Verify `DATABASE_URL` environment variable is set\n- Check PostgreSQL is running\n- Verify database credentials\n\n**Import errors**:\n- Run `pip install -r requirements.txt` in backend directory\n- Check Python version is 3.11+\n\n### Frontend Issues\n\n**Module not found**:\n- Run `npm install` in frontend directory\n- Clear node_modules and reinstall: `rm -rf node_modules && npm install`\n\n**API connection error**:\n- Ensure backend is running on port 5000\n- Check Vite proxy configuration in `frontend/vite.config.js`\n\n**Build errors**:\n- Clear Vite cache: `rm -rf frontend/.vite`\n- Rebuild: `npm run build`\n\n## Team\n\nRJMS was developed by:\n- Nisha\n- Hamid\n- Tanvi\n- Kushal\n- Vinay\n\nUnder the guidance of Professor Shashi Kant Shankar, Ahmedabad University.\n\n## License\n\nThis project was developed as part of coursework at IIT Bombay.\n\n## Support\n\nFor issues or questions, please contact the development team or refer to the project documentation.\n","size_bytes":9779},"frontend/src/main.js":{"content":"import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport './assets/main.css'\n\nconst app = createApp(App)\napp.use(router)\napp.mount('#app')\n","size_bytes":179},"backend/app/routes/courses.py":{"content":"from flask import Blueprint, request, jsonify, session\nfrom ..models.models import db, Course, Enrollment, User, Reflection, ReflectionSubmission\nfrom ..utils.auth_utils import login_required, teacher_required\nfrom datetime import datetime, timedelta\n\nbp = Blueprint('courses', __name__, url_prefix='/api/courses')\n\ndef generate_reflections_for_course(course):\n    \"\"\"Generate reflection instances based on course configuration\"\"\"\n    print(f\"\\n[DEBUG] generate_reflections_for_course called for course {course.id}\")\n    print(f\"[DEBUG] Start date: {course.start_date}, End date: {course.end_date}\")\n    \n    if not course.start_date or not course.end_date:\n        print(f\"[DEBUG] Missing dates - Start: {course.start_date}, End: {course.end_date}\")\n        return\n    \n    # Check if any reflections in this course have submissions\n    existing_reflections = Reflection.query.filter_by(course_id=course.id).all()\n    has_submissions = False\n    \n    for reflection in existing_reflections:\n        submission_count = ReflectionSubmission.query.filter_by(reflection_id=reflection.id).count()\n        if submission_count > 0:\n            has_submissions = True\n            break\n    \n    if has_submissions:\n        print(f\"[DEBUG] Course has existing submissions - skipping reflection regeneration\")\n        print(f\"[DEBUG] Updating structure for existing reflections instead\")\n        # Update structure for existing reflections\n        structure = course.custom_structure if course.custom_structure else None\n        for reflection in existing_reflections:\n            reflection.structure = structure\n        db.session.commit()\n        return\n    \n    # Delete existing reflections to avoid duplicates (only if no submissions)\n    deleted_count = Reflection.query.filter_by(course_id=course.id).delete()\n    print(f\"[DEBUG] Deleted {deleted_count} existing reflections\")\n    \n    # Get reflection structure from course\n    structure = course.custom_structure if course.custom_structure else None\n    \n    # Generate reflections based on recurrence pattern\n    reflections_to_create = []\n    current_date = course.start_date\n    reflection_number = 1\n    \n    # Map day names to weekday numbers (Monday=0, Sunday=6)\n    # Support both full names and abbreviations\n    day_map = {\n        'Monday': 0, 'Mon': 0,\n        'Tuesday': 1, 'Tues': 1, 'Tue': 1,\n        'Wednesday': 2, 'Wed': 2,\n        'Thursday': 3, 'Thurs': 3, 'Thu': 3,\n        'Friday': 4, 'Fri': 4,\n        'Saturday': 5, 'Sat': 5,\n        'Sunday': 6, 'Sun': 6\n    }\n    \n    # Parse selected days if provided\n    selected_weekdays = None\n    if course.selected_days:\n        selected_day_names = [d.strip() for d in course.selected_days.split(',')]\n        selected_weekdays = [day_map[day] for day in selected_day_names if day in day_map]\n        print(f\"[DEBUG] Selected days: {course.selected_days} -> weekdays: {selected_weekdays}\")\n    \n    if selected_weekdays is not None:\n        # When specific days are selected, iterate day by day\n        while current_date <= course.end_date:\n            # Check if current day is one of the selected weekdays\n            if current_date.weekday() in selected_weekdays:\n                # Calculate due date\n                due_days = course.reflection_due_days if course.reflection_due_days else 7\n                due_date = current_date + timedelta(days=due_days)\n                \n                # Create reflection\n                reflection = Reflection(\n                    course_id=course.id,\n                    name=f\"Reflection {current_date.strftime('%d/%m')}\",\n                    number=reflection_number,\n                    description=f\"\",\n                    start_date=current_date,\n                    due_date=due_date,\n                    structure=structure\n                )\n                reflections_to_create.append(reflection)\n                reflection_number += 1\n            \n            # Move to next day\n            current_date += timedelta(days=1)\n    else:\n        # When no specific days selected, use recurrence_days\n        while current_date <= course.end_date:\n            # Calculate due date\n            due_days = course.reflection_due_days if course.reflection_due_days else 7\n            due_date = current_date + timedelta(days=due_days)\n            \n            # Create reflection\n            reflection = Reflection(\n                course_id=course.id,\n                name=f\"Reflection {current_date.strftime('%d/%m')}\",\n                number=reflection_number,\n                description=f\"\",\n                start_date=current_date,\n                due_date=due_date,\n                structure=structure\n            )\n            reflections_to_create.append(reflection)\n            reflection_number += 1\n            \n            # Move to next occurrence based on recurrence_days\n            recurrence = course.recurrence_days if course.recurrence_days else 7\n            current_date += timedelta(days=recurrence)\n    \n    # Bulk insert reflections\n    print(f\"[DEBUG] Total reflections to create: {len(reflections_to_create)}\")\n    if reflections_to_create:\n        db.session.bulk_save_objects(reflections_to_create)\n        db.session.commit()\n        print(f\"[DEBUG] Successfully created {len(reflections_to_create)} reflections\")\n    else:\n        print(\"[DEBUG] No reflections created\")\n\n@bp.route('', methods=['GET'])\n@login_required\ndef get_courses():\n    \"\"\"Get courses based on user role\"\"\"\n    user = User.query.get(session['user_id'])\n    \n    if user.role == 'teacher':\n        courses = Course.query.filter_by(teacher_id=user.id).all()\n    else:\n        # Get enrolled courses for students\n        enrollments = Enrollment.query.filter_by(student_id=user.id).all()\n        courses = [e.course for e in enrollments]\n    \n    search = request.args.get('search', '').lower()\n    status_filter = request.args.get('status')\n    \n    # Filter courses\n    filtered_courses = courses\n    if search:\n        filtered_courses = [c for c in filtered_courses if search in c.name.lower() or (c.course_code and search in c.course_code.lower())]\n    \n    if status_filter and status_filter != 'all':\n        filtered_courses = [c for c in filtered_courses if c.status == status_filter]\n    \n    return jsonify({\n        'courses': [{\n            'id': c.id,\n            'name': c.name,\n            'course_code': c.course_code,\n            'status': c.status,\n            'teacher_id': c.teacher_id,\n            'start_date': c.start_date.isoformat() if c.start_date else None,\n            'end_date': c.end_date.isoformat() if c.end_date else None,\n            'framework': c.framework\n        } for c in filtered_courses]\n    }), 200\n\n@bp.route('/<int:course_id>', methods=['GET'])\n@login_required\ndef get_course(course_id):\n    \"\"\"Get specific course details\"\"\"\n    course = Course.query.get_or_404(course_id)\n    user = User.query.get(session['user_id'])\n    \n    # Check access\n    if user.role == 'teacher' and course.teacher_id != user.id:\n        return jsonify({'error': 'Access denied'}), 403\n    \n    if user.role == 'student':\n        enrollment = Enrollment.query.filter_by(student_id=user.id, course_id=course_id).first()\n        if not enrollment:\n            return jsonify({'error': 'Not enrolled in this course'}), 403\n    \n    # Get existing reflections for this course\n    reflections = Reflection.query.filter_by(course_id=course_id).order_by(Reflection.start_date).all()\n    existing_reflection_dates = [r.start_date.isoformat() if r.start_date else None for r in reflections]\n    \n    return jsonify({\n        'course': {\n            'id': course.id,\n            'name': course.name,\n            'course_code': course.course_code,\n            'status': course.status,\n            'teacher_id': course.teacher_id,\n            'framework': course.framework,\n            'start_date': course.start_date.isoformat() if course.start_date else None,\n            'end_date': course.end_date.isoformat() if course.end_date else None,\n            'reflection_due_days': course.reflection_due_days,\n            'recurrence_days': course.recurrence_days,\n            'selected_days': course.selected_days,\n            'custom_structure': course.custom_structure,\n            'existing_reflection_dates': existing_reflection_dates\n        }\n    }), 200\n\n@bp.route('', methods=['POST'])\n@teacher_required\ndef create_course():\n    \"\"\"Create a new course\"\"\"\n    data = request.get_json()\n    user_id = session['user_id']\n    \n    course = Course(\n        name=data['name'],\n        course_code=data.get('course_code'),\n        teacher_id=user_id,\n        status='active'\n    )\n    \n    db.session.add(course)\n    db.session.commit()\n    \n    return jsonify({\n        'course': {\n            'id': course.id,\n            'name': course.name,\n            'course_code': course.course_code,\n            'status': course.status\n        }\n    }), 201\n\n@bp.route('/<int:course_id>/configure', methods=['PUT'])\n@teacher_required\ndef configure_course(course_id):\n    \"\"\"Configure course settings\"\"\"\n    course = Course.query.get_or_404(course_id)\n    \n    if course.teacher_id != session['user_id']:\n        return jsonify({'error': 'Access denied'}), 403\n    \n    data = request.get_json()\n    \n    if 'framework' in data:\n        course.framework = data['framework']\n    if 'start_date' in data:\n        course.start_date = datetime.fromisoformat(data['start_date'].replace('Z', ''))\n    if 'end_date' in data:\n        course.end_date = datetime.fromisoformat(data['end_date'].replace('Z', ''))\n    if 'reflection_due_days' in data:\n        course.reflection_due_days = data['reflection_due_days']\n    if 'recurrence_days' in data:\n        course.recurrence_days = data['recurrence_days']\n    if 'selected_days' in data:\n        course.selected_days = ','.join(data['selected_days']) if isinstance(data['selected_days'], list) else data['selected_days']\n    if 'custom_structure' in data:\n        course.custom_structure = data['custom_structure']\n    \n    db.session.commit()\n    \n    # Handle reflection dates\n    if 'selected_reflection_dates' in data and data['selected_reflection_dates']:\n        # User has explicitly selected which dates to keep\n        manage_reflections_by_dates(course, data['selected_reflection_dates'])\n    else:\n        # Generate reflections based on the configuration (legacy behavior)\n        generate_reflections_for_course(course)\n    \n    return jsonify({'message': 'Configuration saved successfully'}), 200\n\ndef manage_reflections_by_dates(course, selected_dates):\n    \"\"\"Manage reflections based on explicitly selected dates\"\"\"\n    print(f\"\\n[DEBUG] manage_reflections_by_dates called for course {course.id}\")\n    print(f\"[DEBUG] Selected dates: {selected_dates}\")\n    \n    # Convert selected dates to datetime objects\n    selected_date_objs = []\n    for date_str in selected_dates:\n        try:\n            # Parse ISO date string and convert to datetime at midnight\n            parsed = datetime.fromisoformat(date_str.replace('Z', ''))\n            # If it's already a date object, convert to datetime\n            if isinstance(parsed, datetime):\n                date_obj = parsed\n            else:\n                # It's a date object, convert to datetime\n                from datetime import date as date_class\n                date_obj = datetime.combine(parsed, datetime.min.time())\n            selected_date_objs.append(date_obj)\n        except Exception as e:\n            print(f\"[DEBUG] Failed to parse date: {date_str}, error: {e}\")\n            continue\n    \n    # Get existing reflections\n    existing_reflections = Reflection.query.filter_by(course_id=course.id).all()\n    existing_reflection_map = {r.start_date.date() if r.start_date else None: r for r in existing_reflections}\n    \n    # Get reflection structure\n    structure = course.custom_structure if course.custom_structure else None\n    \n    # Track which dates we've processed\n    processed_dates = set()\n    \n    # Update or create reflections for selected dates\n    reflection_number = 1\n    for date_obj in sorted(selected_date_objs):\n        date_only = date_obj.date()\n        processed_dates.add(date_only)\n        \n        if date_only in existing_reflection_map:\n            # Update existing reflection\n            reflection = existing_reflection_map[date_only]\n            reflection.structure = structure\n            print(f\"[DEBUG] Updated existing reflection for {date_only}\")\n        else:\n            # Create new reflection\n            due_days = course.reflection_due_days if course.reflection_due_days else 7\n            due_date = date_obj + timedelta(days=due_days)\n            \n            reflection = Reflection(\n                course_id=course.id,\n                name=f\"Reflection {date_obj.strftime('%d/%m')}\",\n                number=reflection_number,\n                description=\"\",\n                start_date=date_obj,\n                due_date=due_date,\n                structure=structure\n            )\n            db.session.add(reflection)\n            print(f\"[DEBUG] Created new reflection for {date_only}\")\n        \n        reflection_number += 1\n    \n    # Delete reflections not in selected dates (only if they have no submissions)\n    for date_only, reflection in existing_reflection_map.items():\n        if date_only not in processed_dates:\n            # Check if this reflection has submissions\n            submission_count = ReflectionSubmission.query.filter_by(reflection_id=reflection.id).count()\n            if submission_count == 0:\n                db.session.delete(reflection)\n                print(f\"[DEBUG] Deleted reflection for {date_only} (no submissions)\")\n            else:\n                print(f\"[DEBUG] Kept reflection for {date_only} (has {submission_count} submissions)\")\n    \n    db.session.commit()\n    print(f\"[DEBUG] Reflection management complete\")\n","size_bytes":13903},"start_app.sh":{"content":"#!/bin/bash\n\necho \"================================================\"\necho \"Starting RJMS Application\"\necho \"================================================\"\necho \"\"\n\n# Kill any existing processes\npkill -f \"python run.py\" 2>/dev/null || true\npkill -f \"vite\" 2>/dev/null || true\n\n# Start Flask backend\necho \"â–¶ Starting Flask backend (port 5000)...\"\ncd backend\npython run.py &\nBACKEND_PID=$!\ncd ..\n\n# Wait for backend\nsleep 3\necho \"âœ“ Backend started (PID: $BACKEND_PID)\"\n\n# Start Vue.js frontend  \necho \"â–¶ Starting Vue.js frontend (port 5173)...\"\ncd frontend\nnpm run dev &\nFRONTEND_PID=$!\ncd ..\n\nsleep 2\necho \"âœ“ Frontend started (PID: $FRONTEND_PID)\"\n\necho \"\"\necho \"================================================\"\necho \"âœ“ RJMS is now running!\"\necho \"================================================\"\necho \"\"\necho \"Backend API: http://localhost:5000\"\necho \"Frontend UI: http://localhost:5173\"\necho \"\"\necho \"Open the Webview tab to access the application\"\necho \"\"\necho \"Press Ctrl+C to stop all services\"\necho \"================================================\"\n\n# Wait and handle cleanup\ntrap \"echo ''; echo 'Stopping services...'; kill $BACKEND_PID $FRONTEND_PID 2>/dev/null; exit\" INT TERM\nwait\n","size_bytes":1205},"backend/app/routes/reflections.py":{"content":"from flask import Blueprint, request, jsonify, session\nfrom ..models.models import db, Reflection, ReflectionSubmission, Course, Enrollment, User\nfrom ..utils.auth_utils import login_required, teacher_required, student_required\nfrom ..services.ai_feedback import generate_reflection_feedback\nfrom datetime import datetime\n\nbp = Blueprint('reflections', __name__, url_prefix='/api/reflections')\n\n@bp.route('/course/<int:course_id>', methods=['GET'])\n@login_required\ndef get_course_reflections(course_id):\n    \"\"\"Get all reflections for a course\"\"\"\n    reflections = Reflection.query.filter_by(course_id=course_id).order_by(Reflection.number).all()\n    user = User.query.get(session['user_id'])\n    \n    result = []\n    for r in reflections:\n        reflection_data = {\n            'id': r.id,\n            'name': r.name,\n            'number': r.number,\n            'description': r.description,\n            'start_date': r.start_date.isoformat() if r.start_date else None,\n            'due_date': r.due_date.isoformat() if r.due_date else None,\n            'structure': r.structure\n        }\n        \n        if user.role == 'student':\n            submission = ReflectionSubmission.query.filter_by(\n                reflection_id=r.id,\n                student_id=user.id\n            ).first()\n            \n            reflection_data['submission'] = {\n                'id': submission.id,\n                'submitted': submission.submitted_at is not None,\n                'submitted_at': submission.submitted_at.isoformat() if submission.submitted_at else None,\n                'feedback': submission.ai_feedback if submission.display_feedback else None\n            } if submission else None\n        \n        result.append(reflection_data)\n    \n    return jsonify({'reflections': result}), 200\n\n@bp.route('/<int:reflection_id>', methods=['GET'])\n@login_required\ndef get_reflection(reflection_id):\n    \"\"\"Get specific reflection details\"\"\"\n    reflection = Reflection.query.get_or_404(reflection_id)\n    user = User.query.get(session['user_id'])\n    \n    data = {\n        'id': reflection.id,\n        'name': reflection.name,\n        'number': reflection.number,\n        'description': reflection.description,\n        'start_date': reflection.start_date.isoformat() if reflection.start_date else None,\n        'due_date': reflection.due_date.isoformat() if reflection.due_date else None,\n        'structure': reflection.structure,\n        'course_id': reflection.course_id\n    }\n    \n    if user.role == 'student':\n        submission = ReflectionSubmission.query.filter_by(\n            reflection_id=reflection_id,\n            student_id=user.id\n        ).first()\n        \n        if not submission:\n            submission = ReflectionSubmission(\n                reflection_id=reflection_id,\n                student_id=user.id\n            )\n            db.session.add(submission)\n            db.session.commit()\n        \n        data['submission'] = {\n            'id': submission.id,\n            'content': submission.content,\n            'submitted': submission.submitted_at is not None,\n            'submitted_at': submission.submitted_at.isoformat() if submission.submitted_at else None,\n            'feedback': submission.ai_feedback if submission.display_feedback else None\n        }\n    \n    return jsonify(data), 200\n\n@bp.route('/submit', methods=['POST'])\n@student_required\ndef submit_reflection():\n    \"\"\"Submit a reflection\"\"\"\n    data = request.get_json()\n    reflection_id = data.get('reflection_id')\n    content = data.get('content')\n    \n    # Get the reflection to check due date\n    reflection = Reflection.query.get_or_404(reflection_id)\n    \n    # Check if due date has passed\n    if reflection.due_date and reflection.due_date < datetime.utcnow():\n        return jsonify({'error': 'Submission deadline has passed'}), 403\n    \n    submission = ReflectionSubmission.query.filter_by(\n        reflection_id=reflection_id,\n        student_id=session['user_id']\n    ).first()\n    \n    if not submission:\n        submission = ReflectionSubmission(\n            reflection_id=reflection_id,\n            student_id=session['user_id']\n        )\n        db.session.add(submission)\n    \n    submission.content = content\n    submission.submitted_at = datetime.utcnow()\n    \n    # Get course details for AI feedback context\n    course = Course.query.get(reflection.course_id)\n    \n    # Generate AI-powered feedback using Gemini\n    try:\n        submission.ai_feedback = generate_reflection_feedback(\n            reflection_content=content,\n            framework=course.framework if course else None,\n            structure=reflection.structure\n        )\n        print(f\"[AI] Generated feedback for reflection {reflection_id}\")\n    except Exception as e:\n        print(f\"[AI] Error generating feedback: {str(e)}\")\n        # Fallback to generic feedback if AI fails\n        submission.ai_feedback = \"Thank you for your thoughtful reflection. Keep up the great work!\"\n    \n    db.session.commit()\n    \n    return jsonify({'message': 'Reflection submitted successfully'}), 200\n\n@bp.route('/<int:reflection_id>/submissions', methods=['GET'])\n@teacher_required\ndef get_reflection_submissions(reflection_id):\n    \"\"\"Get all submissions for a reflection (teacher view)\"\"\"\n    reflection = Reflection.query.get_or_404(reflection_id)\n    course = Course.query.get(reflection.course_id)\n    \n    if course.teacher_id != session['user_id']:\n        return jsonify({'error': 'Access denied'}), 403\n    \n    enrollments = Enrollment.query.filter_by(course_id=course.id).all()\n    \n    submissions_data = []\n    for enrollment in enrollments:\n        student = enrollment.student\n        submission = ReflectionSubmission.query.filter_by(\n            reflection_id=reflection_id,\n            student_id=student.id\n        ).first()\n        \n        submissions_data.append({\n            'student_id': student.id,\n            'student_name': student.name,\n            'student_email': student.email,\n            'submitted': submission.submitted_at is not None if submission else False,\n            'submission_date': submission.submitted_at.isoformat() if submission and submission.submitted_at else None,\n            'content': submission.content if submission else None,\n            'ai_feedback': submission.ai_feedback if submission else None,\n            'score': submission.score if submission else None,\n            'display_feedback': submission.display_feedback if submission else False,\n            'submission_id': submission.id if submission else None\n        })\n    \n    return jsonify({'submissions': submissions_data}), 200\n\n@bp.route('/submission/<int:submission_id>/update', methods=['PUT'])\n@teacher_required\ndef update_submission(submission_id):\n    \"\"\"Update submission score, feedback display, and AI feedback\"\"\"\n    submission = ReflectionSubmission.query.get_or_404(submission_id)\n    reflection = Reflection.query.get(submission.reflection_id)\n    course = Course.query.get(reflection.course_id)\n    \n    if course.teacher_id != session['user_id']:\n        return jsonify({'error': 'Access denied'}), 403\n    \n    data = request.get_json()\n    \n    if 'score' in data:\n        submission.score = data['score']\n    if 'display_feedback' in data:\n        submission.display_feedback = data['display_feedback']\n    if 'ai_feedback' in data:\n        submission.ai_feedback = data['ai_feedback']\n    \n    db.session.commit()\n    \n    return jsonify({'message': 'Submission updated successfully'}), 200\n\n@bp.route('/dashboard', methods=['GET'])\n@student_required\ndef get_student_dashboard():\n    \"\"\"Get student dashboard with due/overdue reflections\"\"\"\n    user_id = session['user_id']\n    sort_by = request.args.get('sort_by', 'dates')  # 'dates' or 'courses'\n    \n    enrollments = Enrollment.query.filter_by(student_id=user_id).all()\n    course_ids = [e.course_id for e in enrollments]\n    \n    reflections = Reflection.query.filter(Reflection.course_id.in_(course_ids)).all()\n    \n    dashboard_data = []\n    now = datetime.utcnow()\n    \n    for reflection in reflections:\n        if reflection.due_date and reflection.due_date >= now:\n            submission = ReflectionSubmission.query.filter_by(\n                reflection_id=reflection.id,\n                student_id=user_id\n            ).first()\n            \n            is_submitted = submission and submission.submitted_at is not None\n            \n            if not is_submitted or (reflection.due_date and reflection.due_date < now):\n                course = Course.query.get(reflection.course_id)\n                dashboard_data.append({\n                    'reflection_id': reflection.id,\n                    'reflection_name': reflection.name,\n                    'course_name': course.name,\n                    'course_code': course.course_code,\n                    'due_date': reflection.due_date.isoformat() if reflection.due_date else None,\n                    'is_overdue': reflection.due_date < now if reflection.due_date else False\n                })\n    \n    # Sort\n    if sort_by == 'dates':\n        dashboard_data.sort(key=lambda x: x['due_date'] if x['due_date'] else '')\n    else:  # sort by courses\n        dashboard_data.sort(key=lambda x: (x['course_name'], x['reflection_name']))\n    \n    return jsonify({'reflections': dashboard_data}), 200\n","size_bytes":9327},"run_rjms.sh":{"content":"#!/bin/bash\n\n# Kill any existing processes on ports 5000 and 5173\nlsof -ti:5000 | xargs kill -9 2>/dev/null || true\nlsof -ti:5173 | xargs kill -9 2>/dev/null || true\n\necho \"==========================================\"\necho \"Starting RJMS Application\"\necho \"==========================================\"\n\n# Start Flask backend\necho \"Starting Flask backend on port 5000...\"\ncd backend\npython run.py > ../backend.log 2>&1 &\nBACKEND_PID=$!\ncd ..\n\n# Wait for backend to start\nsleep 3\n\n# Start Vue.js frontend  \necho \"Starting Vue.js frontend on port 5173...\"\ncd frontend\nnpm run dev > ../frontend.log 2>&1 &\nFRONTEND_PID=$!\ncd ..\n\necho \"\"\necho \"==========================================\"\necho \"RJMS is Running!\"\necho \"==========================================\"\necho \"âœ“ Backend API: http://localhost:5000\"\necho \"âœ“ Frontend UI: http://localhost:5173\"\necho \"\"\necho \"View logs:\"\necho \"  Backend: tail -f backend.log\"\necho \"  Frontend: tail -f frontend.log\"\necho \"\"\necho \"Press Ctrl+C to stop\"\necho \"==========================================\"\n\n# Keep script running and handle cleanup\ntrap \"echo 'Stopping...'; kill $BACKEND_PID $FRONTEND_PID 2>/dev/null; exit\" INT TERM\nwait\n","size_bytes":1170},"start.sh":{"content":"#!/bin/bash\n\necho \"Starting RJMS Application...\"\necho \"==============================\"\n\n# Start Flask backend in background\necho \"Starting Flask backend on port 5000...\"\ncd backend\npython run.py &\nBACKEND_PID=$!\ncd ..\n\n# Wait a moment for backend to start\nsleep 3\n\n# Start Vue.js frontend in background\necho \"Starting Vue.js frontend on port 5173...\"\ncd frontend\nnpm run dev &\nFRONTEND_PID=$!\ncd ..\n\necho \"\"\necho \"==============================\"\necho \"RJMS is now running!\"\necho \"==============================\"\necho \"Frontend: http://localhost:5173\"\necho \"Backend API: http://localhost:5000/api\"\necho \"\"\necho \"Press Ctrl+C to stop all services\"\necho \"\"\n\n# Wait for user interrupt\ntrap \"echo 'Stopping services...'; kill $BACKEND_PID $FRONTEND_PID; exit\" INT\nwait\n","size_bytes":764},"backend/app/models/__init__.py":{"content":"","size_bytes":0},"frontend/src/router/index.js":{"content":"import { createRouter, createWebHistory } from 'vue-router'\nimport Home from '../views/Home.vue'\nimport StudentLogin from '../views/StudentLogin.vue'\nimport TeacherLogin from '../views/TeacherLogin.vue'\nimport StudentHome from '../views/student/StudentHome.vue'\nimport StudentCourse from '../views/student/StudentCourse.vue'\nimport StudentDashboard from '../views/student/StudentDashboard.vue'\nimport StudentProfile from '../views/student/StudentProfile.vue'\nimport ReflectionDetails from '../views/student/ReflectionDetails.vue'\nimport TeacherHome from '../views/teacher/TeacherHome.vue'\nimport TeacherProfile from '../views/teacher/TeacherProfile.vue'\nimport CourseOverview from '../views/teacher/CourseOverview.vue'\nimport CourseConfiguration from '../views/teacher/CourseConfiguration.vue'\nimport ManageStudents from '../views/teacher/ManageStudents.vue'\nimport CourseReflections from '../views/teacher/CourseReflections.vue'\nimport ReflectionSubmissions from '../views/teacher/ReflectionSubmissions.vue'\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/login/student',\n    name: 'StudentLogin',\n    component: StudentLogin\n  },\n  {\n    path: '/login/teacher',\n    name: 'TeacherLogin',\n    component: TeacherLogin\n  },\n  {\n    path: '/student',\n    name: 'StudentHome',\n    component: StudentHome,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/student/dashboard',\n    name: 'StudentDashboard',\n    component: StudentDashboard,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/student/profile',\n    name: 'StudentProfile',\n    component: StudentProfile,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/student/course/:id',\n    name: 'StudentCourse',\n    component: StudentCourse,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/student/reflection/:id',\n    name: 'ReflectionDetails',\n    component: ReflectionDetails,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/teacher',\n    name: 'TeacherHome',\n    component: TeacherHome,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/profile',\n    name: 'TeacherProfile',\n    component: TeacherProfile,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/course/:id/overview',\n    name: 'CourseOverview',\n    component: CourseOverview,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/course/:id/configure',\n    name: 'CourseConfiguration',\n    component: CourseConfiguration,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/course/:id/students',\n    name: 'ManageStudents',\n    component: ManageStudents,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/course/:id/reflections',\n    name: 'CourseReflections',\n    component: CourseReflections,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/reflection/:id/submissions',\n    name: 'ReflectionSubmissions',\n    component: ReflectionSubmissions,\n    meta: { requiresAuth: true, role: 'teacher' }\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n  scrollBehavior(to, from, savedPosition) {\n    if (to.hash) {\n      return { el: to.hash, behavior: 'smooth' }\n    }\n    return { top: 0 }\n  }\n})\n\nexport default router\n","size_bytes":3383},"backend/app/routes/__init__.py":{"content":"","size_bytes":0},"start_app.py":{"content":"#!/usr/bin/env python3\n\"\"\"\nRJMS Application Launcher\nStarts Flask backend and Vue.js frontend\n\"\"\"\n\nimport subprocess\nimport sys\nimport time\nimport signal\nimport os\n\n# Process references\nbackend_process = None\nfrontend_process = None\n\ndef signal_handler(sig, frame):\n    \"\"\"Handle shutdown signals gracefully\"\"\"\n    print('\\n\\nShutting down services...')\n    if backend_process:\n        backend_process.terminate()\n    if frontend_process:\n        frontend_process.terminate()\n    sys.exit(0)\n\n# Register signal handlers\nsignal.signal(signal.SIGINT, signal_handler)\nsignal.signal(signal.SIGTERM, signal_handler)\n\ndef main():\n    global backend_process, frontend_process\n    \n    print('=' * 50)\n    print('Starting RJMS Application')\n    print('=' * 50)\n    print()\n    \n    # Start Flask backend\n    print('â–¶ Starting Flask backend (port 5001)...')\n    backend_env = os.environ.copy()\n    backend_env['PORT'] = '5001'\n    backend_process = subprocess.Popen(\n        ['python', 'run.py'],\n        cwd=os.path.join(os.path.dirname(__file__), 'backend'),\n        env=backend_env,\n        stdout=subprocess.PIPE,\n        stderr=subprocess.STDOUT,\n        universal_newlines=True,\n        bufsize=1\n    )\n    \n    # Wait for backend to start\n    time.sleep(3)\n    \n    if backend_process.poll() is not None:\n        print('âœ— Backend failed to start')\n        sys.exit(1)\n    \n    print('âœ“ Backend started')\n    print()\n    \n    # Start Vue.js frontend\n    print('â–¶ Starting Vue.js frontend (port 5000)...')\n    frontend_process = subprocess.Popen(\n        ['npm', '--prefix', 'frontend', 'run', 'dev'],\n        cwd=os.path.dirname(__file__),\n        stdout=subprocess.PIPE,\n        stderr=subprocess.STDOUT,\n        universal_newlines=True,\n        bufsize=1\n    )\n    \n    print('âœ“ Frontend starting...')\n    print()\n    print('=' * 50)\n    print('âœ“ RJMS is running!')\n    print('=' * 50)\n    print()\n    print('Backend API:  http://localhost:5001')\n    print('Frontend UI:  http://localhost:5000')\n    print()\n    print('Open the Webview tab to access the application')\n    print()\n    print('Press Ctrl+C to stop')\n    print('=' * 50)\n    print()\n    \n    # Stream output from both processes\n    try:\n        while True:\n            # Check if processes are still running\n            if backend_process.poll() is not None:\n                print('Backend process exited unexpectedly')\n                break\n            \n            if frontend_process.poll() is not None:\n                print('Frontend process exited unexpectedly')\n                break\n            \n            # Read and print backend output\n            if backend_process.stdout:\n                line = backend_process.stdout.readline()\n                if line:\n                    print(f'[Backend] {line.strip()}')\n            \n            # Read and print frontend output\n            if frontend_process.stdout:\n                line = frontend_process.stdout.readline()\n                if line:\n                    print(f'[Frontend] {line.strip()}')\n            \n            time.sleep(0.1)\n    \n    except KeyboardInterrupt:\n        signal_handler(None, None)\n    \n    # Clean up\n    if backend_process:\n        backend_process.terminate()\n        backend_process.wait()\n    \n    if frontend_process:\n        frontend_process.terminate()\n        frontend_process.wait()\n\nif __name__ == '__main__':\n    main()\n","size_bytes":3395},"backend/app/routes/teacher.py":{"content":"from flask import Blueprint, jsonify, session\nfrom ..models.models import Course, Reflection, ReflectionSubmission, Enrollment\nfrom ..utils.auth_utils import teacher_required\n\nbp = Blueprint('teacher', __name__, url_prefix='/api/teacher')\n\n@bp.route('/course/<int:course_id>/overview', methods=['GET'])\n@teacher_required\ndef get_course_overview(course_id):\n    \"\"\"Get course overview statistics\"\"\"\n    course = Course.query.get_or_404(course_id)\n    \n    if course.teacher_id != session['user_id']:\n        return jsonify({'error': 'Access denied'}), 403\n    \n    reflections = Reflection.query.filter_by(course_id=course_id).all()\n    total_students = Enrollment.query.filter_by(course_id=course_id).count()\n    \n    overview_data = []\n    for reflection in reflections:\n        submissions_count = ReflectionSubmission.query.filter_by(\n            reflection_id=reflection.id\n        ).filter(ReflectionSubmission.submitted_at.isnot(None)).count()\n        \n        overview_data.append({\n            'reflection_name': reflection.name,\n            'reflections_received': submissions_count,\n            'total_enrolled_students': total_students\n        })\n    \n    return jsonify({\n        'overview': overview_data,\n        'total_students': total_students,\n        'total_reflections': len(reflections)\n    }), 200\n","size_bytes":1319},"frontend/vite.config.js":{"content":"import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\nimport path from 'path'\n\nexport default defineConfig({\n  plugins: [vue()],\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src')\n    }\n  },\n  server: {\n    host: '0.0.0.0',\n    port: 5000,\n    allowedHosts: [\n      '.replit.app',\n      '.replit.dev'\n    ],\n    proxy: {\n      '/api': {\n        target: 'http://localhost:5001',\n        changeOrigin: true,\n        secure: false,\n        ws: true,\n        configure: (proxy, _options) => {\n          proxy.on('error', (err, _req, _res) => {\n            console.log('proxy error', err);\n          });\n          proxy.on('proxyReq', (proxyReq, req, _res) => {\n            console.log('Sending Request to the Target:', req.method, req.url);\n          });\n          proxy.on('proxyRes', (proxyRes, req, _res) => {\n            console.log('Received Response from the Target:', proxyRes.statusCode, req.url);\n          });\n        },\n      }\n    }\n  }\n})\n","size_bytes":986},"backend/app/utils/__init__.py":{"content":"","size_bytes":0},"QUICK_START.md":{"content":"# ðŸš€ RJMS Quick Start Guide\n\n## Tech Stack (As Specified)\n- **Frontend**: Vue.js 3 with Vue Router\n- **Backend**: Flask (Python)\n- **Database**: PostgreSQL\n- **Note**: Vue.js requires Node.js to run its Vite dev server (this is standard for all Vue.js apps)\n\n---\n\n## How to Run the Application\n\n### **Option 1: Using Python Launcher (Recommended)**\n\nOpen the Shell and run:\n```bash\npython start_app.py\n```\n\nThis Python script will:\n1. Start the Flask backend on port 5000\n2. Start the Vue.js frontend (via Vite) on port 5173\n3. Display logs from both services\n\n### **Option 2: Manual Start (Two Shell Tabs)**\n\n**Shell Tab 1 - Flask Backend:**\n```bash\ncd backend\npython run.py\n```\nWait until you see: `Running on http://127.0.0.1:5000`\n\n**Shell Tab 2 - Vue.js Frontend:**\n```bash\ncd frontend\nnpm run dev\n```\nWait until you see: `Local: http://localhost:5173/`\n\n---\n\n## âœ… Access the Application\n\n1. Open the **Webview** tab in Replit (or click \"Open in new tab\")\n2. The home page should load\n3. Click the **\"Login\"** button in the navigation bar\n4. Choose **\"Student\"** or **\"Teacher\"** from the dropdown\n5. You'll land on a dedicated login page\n6. Enter any email and name (demo mode)\n7. Click **\"Sign in with Google (Demo Mode)\"**\n8. You'll be redirected to the respective dashboard!\n\n---\n\n## ðŸ§ª Test the Login Flow\n\n### Student Login:\n1. Home page â†’ Click \"Login\" â†’ Select \"Student\"\n2. Lands on `/login/student`\n3. Enter: `student@test.com` / `Test Student`\n4. Click \"Sign in with Google (Demo Mode)\"\n5. Redirected to Student dashboard\n\n### Teacher Login:\n1. Home page â†’ Click \"Login\" â†’ Select \"Teacher\"\n2. Lands on `/login/teacher`\n3. Enter: `teacher@test.com` / `Test Teacher`\n4. Click \"Sign in with Google (Demo Mode)\"\n5. Redirected to Teacher dashboard\n\n---\n\n## ðŸ“‹ What's Implemented\n\nâœ… **Home Page**\n- Product, Features, About Us sections\n- Navigation with Login dropdown (Student/Teacher)\n\nâœ… **Authentication Flow**\n- Separate login pages for Student (`/login/student`) and Teacher (`/login/teacher`)\n- \"Sign in with Google (Demo Mode)\" button on each\n- Google OAuth demo mode (just enter email and name)\n- Session management\n\nâœ… **Student Features**\n- View enrolled courses\n- Access reflection journals\n- Submit reflections\n- View teacher feedback\n- Dashboard with due/overdue reflections\n- Profile page\n\nâœ… **Teacher Features**\n- Create and manage courses\n- Configure reflection frameworks (Bloom's Taxonomy, 5 WHYs, 1-H)\n- Set course dates and recurrence\n- Manage student enrollments\n- View all reflection submissions\n- Assign scores and approve AI feedback\n- Course overview statistics\n\nâœ… **Design**\n- Desktop-optimized interface\n- Exact color palette:\n  - Background: `#FFF7ED`\n  - Containers: `#FBEAD3`\n  - Buttons/Popups: `#F9DDBB`\n  - Filters: `#C4B49E`\n\n---\n\n## ðŸ—„ï¸ Database Schema\n\nPostgreSQL tables:\n- **users** - Students and teachers with Google OAuth\n- **courses** - Course information and configuration\n- **enrollments** - Student-course relationships\n- **reflections** - Journal assignments with deadlines\n- **reflection_submissions** - Student work with feedback and scores\n\n---\n\n## ðŸ”§ Troubleshooting\n\n**App won't start:**\n- Ensure PostgreSQL is running (Replit handles this automatically)\n- Check that both backend (5000) and frontend (5173) ports are free\n\n**Backend errors:**\n- Check `/tmp/backend.log` if using the Python launcher\n- Verify DATABASE_URL environment variable is set\n\n**Frontend not loading:**\n- Frontend dependencies should auto-install via Replit\n- If issues persist, the packager tool will reinstall them\n\n**Login not working:**\n- Demo mode doesn't require real Google OAuth\n- Just enter any email and name to test\n\n---\n\n## ðŸ“š Full Documentation\n\nSee `README.md` for complete documentation including:\n- Complete API endpoint reference\n- Database schema details\n- Production deployment guide\n- Google OAuth setup for production\n\n---\n\n**Need help?** Make sure `start_app.py` is running or both services are running in separate shells.\n","size_bytes":4011},"src/router/index.js":{"content":"import { createRouter, createWebHistory } from 'vue-router'\nimport Home from '../views/Home.vue'\nimport StudentLogin from '../views/StudentLogin.vue'\nimport TeacherLogin from '../views/TeacherLogin.vue'\nimport StudentHome from '../views/student/StudentHome.vue'\nimport StudentCourse from '../views/student/StudentCourse.vue'\nimport StudentDashboard from '../views/student/StudentDashboard.vue'\nimport StudentProfile from '../views/student/StudentProfile.vue'\nimport ReflectionDetails from '../views/student/ReflectionDetails.vue'\nimport TeacherHome from '../views/teacher/TeacherHome.vue'\nimport CourseOverview from '../views/teacher/CourseOverview.vue'\nimport CourseConfiguration from '../views/teacher/CourseConfiguration.vue'\nimport ManageStudents from '../views/teacher/ManageStudents.vue'\nimport CourseReflections from '../views/teacher/CourseReflections.vue'\nimport ReflectionSubmissions from '../views/teacher/ReflectionSubmissions.vue'\n\nconst routes = [\n  {\n    path: '/',\n    name: 'Home',\n    component: Home\n  },\n  {\n    path: '/login/student',\n    name: 'StudentLogin',\n    component: StudentLogin\n  },\n  {\n    path: '/login/teacher',\n    name: 'TeacherLogin',\n    component: TeacherLogin\n  },\n  {\n    path: '/student',\n    name: 'StudentHome',\n    component: StudentHome,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/student/dashboard',\n    name: 'StudentDashboard',\n    component: StudentDashboard,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/student/profile',\n    name: 'StudentProfile',\n    component: StudentProfile,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/student/course/:id',\n    name: 'StudentCourse',\n    component: StudentCourse,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/student/reflection/:id',\n    name: 'ReflectionDetails',\n    component: ReflectionDetails,\n    meta: { requiresAuth: true, role: 'student' }\n  },\n  {\n    path: '/teacher',\n    name: 'TeacherHome',\n    component: TeacherHome,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/course/:id/overview',\n    name: 'CourseOverview',\n    component: CourseOverview,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/course/:id/configure',\n    name: 'CourseConfiguration',\n    component: CourseConfiguration,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/course/:id/students',\n    name: 'ManageStudents',\n    component: ManageStudents,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/course/:id/reflections',\n    name: 'CourseReflections',\n    component: CourseReflections,\n    meta: { requiresAuth: true, role: 'teacher' }\n  },\n  {\n    path: '/teacher/reflection/:id/submissions',\n    name: 'ReflectionSubmissions',\n    component: ReflectionSubmissions,\n    meta: { requiresAuth: true, role: 'teacher' }\n  }\n]\n\nconst router = createRouter({\n  history: createWebHistory(),\n  routes,\n  scrollBehavior(to, from, savedPosition) {\n    if (to.hash) {\n      return { el: to.hash, behavior: 'smooth' }\n    }\n    return { top: 0 }\n  }\n})\n\nexport default router\n","size_bytes":3170},"backend/app/services/__init__.py":{"content":"","size_bytes":0},"backend/app/services/ai_feedback.py":{"content":"import os\nimport google.generativeai as genai\nfrom typing import Optional\nimport json\n\n# Configure Gemini API\ngenai.configure(api_key=os.environ.get('GEMINI_API_KEY'))\n\ndef generate_reflection_feedback(\n    reflection_content: str,\n    framework: Optional[str] = None,\n    structure: Optional[str] = None\n) -> str:\n    \"\"\"\n    Generate AI-powered feedback for student reflection submissions using Google Gemini.\n    \n    Args:\n        reflection_content: The student's reflection text (may be JSON structured)\n        framework: The reflection framework being used (e.g., \"Bloom's Taxonomy\", \"5 WHYs\", \"1-H\")\n        structure: The custom structure as JSON string containing field labels\n    \n    Returns:\n        AI-generated feedback text\n    \"\"\"\n    try:\n        # Parse reflection content if it's structured\n        reflection_text = \"\"\n        try:\n            content_data = json.loads(reflection_content)\n            if isinstance(content_data, list) and len(content_data) > 0 and 'label' in content_data[0]:\n                # Structured format: convert to readable text\n                reflection_text = \"\\n\\n\".join([\n                    f\"{item['label']}:\\n{item['response']}\"\n                    for item in content_data\n                ])\n            else:\n                reflection_text = reflection_content\n        except (json.JSONDecodeError, TypeError):\n            # Plain text format\n            reflection_text = reflection_content\n        \n        # Build context-aware prompt\n        prompt = f\"\"\"You are an Educational reflection feedback expert analyzing a student's reflection journal entry. You need to evaluate the feedback based on the configuration framework chosen by the educator.\"\"\"\n        \n        if framework:\n            prompt += f\" The framework chosen by the educator is '{framework}'.\"\n        \n        prompt += f\"\"\"\\n\\nYou have to provide feedback separately for each question/label of the reflection. Also, provide constructive, encouraging, specific feedback that can help the student improve and deepen their learning.\n\nStudent's Reflection:\n{reflection_text}\n\nPlease provide your feedback addressing each question/label separately, highlighting what the student did well and suggesting areas for improvement and deeper exploration.\"\"\"\n\n        # Call Gemini API\n        model = genai.GenerativeModel('gemini-2.0-flash-exp')\n        response = model.generate_content(prompt)\n        \n        if response and response.text:\n            return response.text.strip()\n        else:\n            return \"Thank you for your thoughtful reflection. Keep up the great work!\"\n            \n    except Exception as e:\n        print(f\"Error generating AI feedback: {str(e)}\")\n        # Fallback to generic positive feedback\n        return \"Great reflection! Consider elaborating more on your learning outcomes and connecting your insights to real-world applications.\"\n","size_bytes":2900},"attached_assets/content-1762263853721.md":{"content":"","size_bytes":0}},"version":2}